"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Database = void 0;
const _utils_1 = require("../_utils");
const main_1 = require("../main");
function Database() {
    return function decorator(target) {
        const database = new target();
        if (!database.call) return _utils_1.Logger.error(`Database "${target.name}" does not have an call method`);
        if (!target.name.endsWith("Database")) return _utils_1.Logger.error(`Database name "${target.name}" does not end with Database`);
        main_1.databases[target.name] = database;
    };
}
exports.Database = Database;
//# sourceMappingURL=database.main.js.map
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kYXRhYmFzZS9kYXRhYmFzZS5tYWluLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRGF0YWJhc2UiLCJfdXRpbHNfMSIsInJlcXVpcmUiLCJtYWluXzEiLCJkZWNvcmF0b3IiLCJ0YXJnZXQiLCJkYXRhYmFzZSIsImNhbGwiLCJMb2dnZXIiLCJlcnJvciIsIm5hbWUiLCJlbmRzV2l0aCIsImRhdGFiYXNlcyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBQ0FBLE9BQU9DLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDLEVBQUVDLE9BQU8sSUFBVCxFQUE3QztBQUNBRCxRQUFRRSxRQUFSLEdBQW1CLEtBQUssQ0FBeEI7QUFDQSxNQUFNQyxXQUFXQyxRQUFRLFdBQVIsQ0FBakI7QUFDQSxNQUFNQyxTQUFTRCxRQUFRLFNBQVIsQ0FBZjtBQUNBLFNBQVNGLFFBQVQsR0FBb0I7QUFDaEIsV0FBTyxTQUFTSSxTQUFULENBQW1CQyxNQUFuQixFQUEyQjtBQUM5QixjQUFNQyxXQUFXLElBQUlELE1BQUosRUFBakI7QUFDQSxZQUFJLENBQUNDLFNBQVNDLElBQWQsRUFDSSxPQUFPTixTQUFTTyxNQUFULENBQWdCQyxLQUFoQixDQUF1QixhQUFZSixPQUFPSyxJQUFLLGdDQUEvQyxDQUFQO0FBQ0osWUFBSSxDQUFDTCxPQUFPSyxJQUFQLENBQVlDLFFBQVosQ0FBcUIsVUFBckIsQ0FBTCxFQUNJLE9BQU9WLFNBQVNPLE1BQVQsQ0FBZ0JDLEtBQWhCLENBQXVCLGtCQUFpQkosT0FBT0ssSUFBSyw4QkFBcEQsQ0FBUDtBQUNKUCxlQUFPUyxTQUFQLENBQWlCUCxPQUFPSyxJQUF4QixJQUFnQ0osUUFBaEM7QUFDSCxLQVBEO0FBUUg7QUFDRFIsUUFBUUUsUUFBUixHQUFtQkEsUUFBbkI7QUFDQSIsImZpbGUiOiJkYXRhYmFzZS5tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5EYXRhYmFzZSA9IHZvaWQgMDtcclxuY29uc3QgX3V0aWxzXzEgPSByZXF1aXJlKFwiLi4vX3V0aWxzXCIpO1xyXG5jb25zdCBtYWluXzEgPSByZXF1aXJlKFwiLi4vbWFpblwiKTtcclxuZnVuY3Rpb24gRGF0YWJhc2UoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gZGVjb3JhdG9yKHRhcmdldCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGFiYXNlID0gbmV3IHRhcmdldCgpO1xyXG4gICAgICAgIGlmICghZGF0YWJhc2UuY2FsbClcclxuICAgICAgICAgICAgcmV0dXJuIF91dGlsc18xLkxvZ2dlci5lcnJvcihgRGF0YWJhc2UgXCIke3RhcmdldC5uYW1lfVwiIGRvZXMgbm90IGhhdmUgYW4gY2FsbCBtZXRob2RgKTtcclxuICAgICAgICBpZiAoIXRhcmdldC5uYW1lLmVuZHNXaXRoKFwiRGF0YWJhc2VcIikpXHJcbiAgICAgICAgICAgIHJldHVybiBfdXRpbHNfMS5Mb2dnZXIuZXJyb3IoYERhdGFiYXNlIG5hbWUgXCIke3RhcmdldC5uYW1lfVwiIGRvZXMgbm90IGVuZCB3aXRoIERhdGFiYXNlYCk7XHJcbiAgICAgICAgbWFpbl8xLmRhdGFiYXNlc1t0YXJnZXQubmFtZV0gPSBkYXRhYmFzZTtcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5EYXRhYmFzZSA9IERhdGFiYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhYmFzZS5tYWluLmpzLm1hcCJdfQ==