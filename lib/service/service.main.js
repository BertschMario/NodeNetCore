"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Service = void 0;
const _utils_1 = require("../_utils");
const main_1 = require("../main");
function Service() {
    return function decorator(target) {
        const service = new target();
        if (!service.call) return _utils_1.Logger.error(`Service "${target.name}" does not have an call method`);
        if (!target.name.endsWith("Service")) return _utils_1.Logger.error(`Service name "${target.name}" does not end with Service`);
        if (service.dispatch) service.dispatch = (...args) => {
            const databaseName = target.name.replace("Service", "") + "Database";
            return main_1.databases[databaseName].call(...args);
        };
        main_1.services[target.name] = service;
    };
}
exports.Service = Service;
//# sourceMappingURL=service.main.js.map
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlL3NlcnZpY2UubWFpbi5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlNlcnZpY2UiLCJfdXRpbHNfMSIsInJlcXVpcmUiLCJtYWluXzEiLCJkZWNvcmF0b3IiLCJ0YXJnZXQiLCJzZXJ2aWNlIiwiY2FsbCIsIkxvZ2dlciIsImVycm9yIiwibmFtZSIsImVuZHNXaXRoIiwiZGlzcGF0Y2giLCJhcmdzIiwiZGF0YWJhc2VOYW1lIiwicmVwbGFjZSIsImRhdGFiYXNlcyIsInNlcnZpY2VzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFDQUEsT0FBT0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkMsRUFBRUMsT0FBTyxJQUFULEVBQTdDO0FBQ0FELFFBQVFFLE9BQVIsR0FBa0IsS0FBSyxDQUF2QjtBQUNBLE1BQU1DLFdBQVdDLFFBQVEsV0FBUixDQUFqQjtBQUNBLE1BQU1DLFNBQVNELFFBQVEsU0FBUixDQUFmO0FBQ0EsU0FBU0YsT0FBVCxHQUFtQjtBQUNmLFdBQU8sU0FBU0ksU0FBVCxDQUFtQkMsTUFBbkIsRUFBMkI7QUFDOUIsY0FBTUMsVUFBVSxJQUFJRCxNQUFKLEVBQWhCO0FBQ0EsWUFBSSxDQUFDQyxRQUFRQyxJQUFiLEVBQ0ksT0FBT04sU0FBU08sTUFBVCxDQUFnQkMsS0FBaEIsQ0FBdUIsWUFBV0osT0FBT0ssSUFBSyxnQ0FBOUMsQ0FBUDtBQUNKLFlBQUksQ0FBQ0wsT0FBT0ssSUFBUCxDQUFZQyxRQUFaLENBQXFCLFNBQXJCLENBQUwsRUFDSSxPQUFPVixTQUFTTyxNQUFULENBQWdCQyxLQUFoQixDQUF1QixpQkFBZ0JKLE9BQU9LLElBQUssNkJBQW5ELENBQVA7QUFDSixZQUFJSixRQUFRTSxRQUFaLEVBQ0lOLFFBQVFNLFFBQVIsR0FBbUIsQ0FBQyxHQUFHQyxJQUFKLEtBQWE7QUFDNUIsa0JBQU1DLGVBQWVULE9BQU9LLElBQVAsQ0FBWUssT0FBWixDQUFvQixTQUFwQixFQUErQixFQUEvQixJQUFxQyxVQUExRDtBQUNBLG1CQUFPWixPQUFPYSxTQUFQLENBQWlCRixZQUFqQixFQUErQlAsSUFBL0IsQ0FBb0MsR0FBR00sSUFBdkMsQ0FBUDtBQUNILFNBSEQ7QUFJSlYsZUFBT2MsUUFBUCxDQUFnQlosT0FBT0ssSUFBdkIsSUFBK0JKLE9BQS9CO0FBQ0gsS0FaRDtBQWFIO0FBQ0RSLFFBQVFFLE9BQVIsR0FBa0JBLE9BQWxCO0FBQ0EiLCJmaWxlIjoic2VydmljZS5tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5TZXJ2aWNlID0gdm9pZCAwO1xyXG5jb25zdCBfdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9fdXRpbHNcIik7XHJcbmNvbnN0IG1haW5fMSA9IHJlcXVpcmUoXCIuLi9tYWluXCIpO1xyXG5mdW5jdGlvbiBTZXJ2aWNlKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IHRhcmdldCgpO1xyXG4gICAgICAgIGlmICghc2VydmljZS5jYWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gX3V0aWxzXzEuTG9nZ2VyLmVycm9yKGBTZXJ2aWNlIFwiJHt0YXJnZXQubmFtZX1cIiBkb2VzIG5vdCBoYXZlIGFuIGNhbGwgbWV0aG9kYCk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXQubmFtZS5lbmRzV2l0aChcIlNlcnZpY2VcIikpXHJcbiAgICAgICAgICAgIHJldHVybiBfdXRpbHNfMS5Mb2dnZXIuZXJyb3IoYFNlcnZpY2UgbmFtZSBcIiR7dGFyZ2V0Lm5hbWV9XCIgZG9lcyBub3QgZW5kIHdpdGggU2VydmljZWApO1xyXG4gICAgICAgIGlmIChzZXJ2aWNlLmRpc3BhdGNoKVxyXG4gICAgICAgICAgICBzZXJ2aWNlLmRpc3BhdGNoID0gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFiYXNlTmFtZSA9IHRhcmdldC5uYW1lLnJlcGxhY2UoXCJTZXJ2aWNlXCIsIFwiXCIpICsgXCJEYXRhYmFzZVwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1haW5fMS5kYXRhYmFzZXNbZGF0YWJhc2VOYW1lXS5jYWxsKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIG1haW5fMS5zZXJ2aWNlc1t0YXJnZXQubmFtZV0gPSBzZXJ2aWNlO1xyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLlNlcnZpY2UgPSBTZXJ2aWNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJ2aWNlLm1haW4uanMubWFwIl19